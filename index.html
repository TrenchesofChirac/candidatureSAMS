<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Candidature EMS - SAMS</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    background: url('https://fivemgg.nyc3.digitaloceanspaces.com/fivem/2024/04/16115314/Ocean-Hospital-MLO.jpeg') no-repeat center center fixed;
    background-size: cover;
  }

  .overlay {
    background: rgba(0,0,0,0.65);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
  }

  .container {
    max-width: 850px;
    width: 100%;
    background: rgba(255,255,255,0.95);
    padding: 40px 50px;
    border-radius: 15px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.4);
    overflow: hidden;
  }

  .logo {
    max-width: 150px;
    margin: 0 auto 20px auto;
    display: block;
  }

  h1 {
    text-align: center;
    color: #2f3640;
    margin-bottom: 30px;
    font-size: 2.2rem;
  }

  .progress-bar {
    width: 100%;
    height: 12px;
    background: #dcdde1;
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 25px;
  }

  .progress {
    height: 100%;
    background: #00a8ff;
    width: 0%;
    transition: width 0.3s ease;
  }

  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    margin-top: 35px;
    padding: 10px 0;
  }

  .section-header h2 {
    margin: 0;
    font-size: 1.4rem;
    color: #2f3640;
  }

  .section-header span {
    font-size: 1.5rem;
    transition: transform 0.3s ease;
  }

  .section-content {
    display: none;
    margin-top: 15px;
  }

  label {
    display: block;
    margin-top: 15px;
    font-weight: 600;
    font-size: 1rem;
    color: #2f3640;
  }

  input[type=text], input[type=number], textarea {
    width: 100%;
    padding: 12px 15px;
    margin-top: 8px;
    border-radius: 8px;
    border: 1px solid #dcdde1;
    font-size: 15px;
    transition: 0.3s;
  }

  input[type=text]:focus, input[type=number]:focus, textarea:focus {
    outline: none;
    border-color: #00a8ff;
    box-shadow: 0 0 8px rgba(0,168,255,0.3);
  }

  textarea {
    resize: vertical;
    min-height: 90px;
  }

  button {
    margin-top: 30px;
    background: #00a8ff;
    color: white;
    border: none;
    padding: 16px 30px;
    border-radius: 10px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
    width: 100%;
  }

  button:hover {
    background: #0097e6;
    transform: translateY(-2px);
  }

  .success {
    display: none;
    margin-top: 20px;
    padding: 15px;
    background: #44bd32;
    color: white;
    border-radius: 8px;
    text-align: center;
    font-weight: bold;
    font-size: 1rem;
    animation: fadeIn 0.5s ease forwards;
  }

  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(-10px);}
    to {opacity: 1; transform: translateY(0);}
  }

</style>
</head>
<body>
<div class="overlay">
  <div class="container">
    <img src="https://dunb17ur4ymx4.cloudfront.net/packages/images/a828492200c5317837c63b4166ed26f762cbfd1c.png" alt="Logo SAMS" class="logo">
    <h1>Candidature EMS - SAMS</h1>

    <div class="progress-bar">
      <div class="progress" id="progress"></div>
    </div>

    <form id="candidatureSAMS">

      <!-- Informations g√©n√©rales -->
      <div class="section">
        <div class="section-header">
          <h2>Informations g√©n√©rales</h2>
          <span>+</span>
        </div>
        <div class="section-content">
          <label>Nom RP :</label>
          <input type="text" name="nomRP" required>
          <label>√Çge RP :</label>
          <input type="number" name="ageRP" required min="18">
          <label>Exp√©rience dans les m√©tiers EMS ou RP m√©dical :</label>
          <textarea name="experience" required></textarea>
          <label>Motivation et disponibilit√© :</label>
          <textarea name="motivation" required></textarea>
          <label>Pourquoi souhaitez-vous rejoindre le SAMS ?</label>
          <textarea name="raison" required></textarea>
          <label>Combien de temps pouvez-vous consacrer au r√¥le d‚ÄôEMS par semaine ?</label>
          <input type="text" name="temps" required>
          <label>√ätes-vous pr√™t √† respecter les r√®gles du SAMS et les proc√©dures RP m√©dicales ?</label>
          <input type="text" name="regles" required>
        </div>
      </div>

      <!-- Connaissances RP m√©dicales -->
      <div class="section">
        <div class="section-header">
          <h2>Connaissances RP m√©dicales</h2>
          <span>+</span>
        </div>
        <div class="section-content">
          <label>Connaissances RP m√©dicales :</label>
          <textarea name="connaissances" required></textarea>
          <label>Que feriez-vous si un patient est inconscient mais respire encore ?</label>
          <textarea name="inconscient" required></textarea>
          <label>Que feriez-vous si un patient est en arr√™t cardiaque ?</label>
          <textarea name="arretCardiaque" required></textarea>
          <label>Connaissez-vous les diff√©rents grades/positions au sein d‚Äôune √©quipe EMS ?</label>
          <textarea name="grades" required></textarea>
          <label>Comment r√©agiriez-vous face √† un patient agressif ou non coop√©ratif ?</label>
          <textarea name="patientAgressif" required></textarea>
        </div>
      </div>

      <!-- Sc√©narios RP -->
      <div class="section">
        <div class="section-header">
          <h2>Sc√©narios RP</h2>
          <span>+</span>
        </div>
        <div class="section-content">
          <label>Accident de voiture avec plusieurs victimes :</label>
          <textarea name="scenarios1" required></textarea>
          <label>Seul sur les lieux avec un patient gravement bless√© :</label>
          <textarea name="scenarios2" required></textarea>
        </div>
      </div>

      <button type="submit">Envoyer la candidature</button>
      <div class="success" id="successMessage">‚úÖ Votre candidature a √©t√© envoy√©e avec succ√®s !</div>
    </form>
  </div>
</div>

<script>
// Sections collapsables
document.querySelectorAll(".section-header").forEach(header => {
  header.addEventListener("click", () => {
    const content = header.nextElementSibling;
    const icon = header.querySelector("span");
    if(content.style.display === "block"){
      content.style.display = "none";
      icon.textContent = "+";
    } else {
      content.style.display = "block";
      icon.textContent = "-";
    }
  });
});

// Progression
const form = document.getElementById("candidatureSAMS");
const progress = document.getElementById("progress");
const inputs = form.querySelectorAll("input, textarea");

inputs.forEach(input => {
  input.addEventListener("input", updateProgress);
});

function updateProgress(){
  const total = inputs.length;
  let filled = 0;
  inputs.forEach(i => { if(i.value.trim() !== "") filled++; });
  progress.style.width = `${Math.floor((filled/total)*100)}%`;
}

// Envoi vers Discord
form.addEventListener("submit", async (e) => {
  e.preventDefault();
  const data = Object.fromEntries(new FormData(e.target).entries());

  // Validation simple
  if(data.ageRP < 18){
    alert("L'√¢ge RP doit √™tre au moins 18 ans.");
    return;
  }

  await fetch("https://discord.com/api/webhooks/1410937215151771710/2IVh-sbz6loIfCbA9YXwVVc6V9Pl8vC-hQVkBwyCnuBuj2aVi_-Yj5ybxil5VkOVvgXy", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      embeds:[{
        title: "ü©∫ Nouvelle candidature SAMS",
        description: "‚ö†Ô∏è Merci de ne pas supprimer cette candidature avant d‚Äôavoir r√©alis√© l‚Äôentretien.",
        color: 3447003,
        fields: [
          { name: "üë§ Nom RP", value: data.nomRP },
          { name: "üéÇ √Çge RP", value: data.ageRP },
          { name: "üíº Exp√©rience EMS / RP m√©dical", value: data.experience },
          { name: "üìù Motivation et disponibilit√©", value: data.motivation },
          { name: "‚ùì Pourquoi rejoindre le SAMS ?", value: data.raison },
          { name: "‚è∞ Temps disponible par semaine", value: data.temps },
          { name: "üìú Respect des r√®gles SAMS", value: data.regles },
          { name: "üìö Connaissances RP m√©dicales", value: data.connaissances },
          { name: "üí§ Patient inconscient mais respire", value: data.inconscient },
          { name: "üíî Patient en arr√™t cardiaque", value: data.arretCardiaque },
          { name: "üéñÔ∏è Connaissance des grades EMS", value: data.grades },
          { name: "üò° Patient agressif / non coop√©ratif", value: data.patientAgressif },
          { name: "üöó Sc√©nario : accident multiple", value: data.scenarios1 },
          { name: "üöë Sc√©nario : seul avec patient grave", value: data.scenarios2 }
        ],
        footer: { text: "Candidature envoy√©e automatiquement via le formulaire SAMS" },
        timestamp: new Date()
      }]
    })
  });

  document.getElementById("successMessage").style.display = "block";
  form.reset();
  updateProgress();
});
</script>
</body>
</html>
